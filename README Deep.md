# ArcaneAdvisor ‚Äî Deep Technical README

ArcaneAdvisor ‚Äî —ç—Ç–æ –∫—Ä–æ—Å—Å-–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (**Expo + React Native + Web**) –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å SRD D&D 5e, –æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –Ω–∞ **–∞–¥–º–∏–Ω–æ–≤, –î–ú –∏ —Å–æ–∑–¥–∞—Ç–µ–ª–µ–π –∫–æ–Ω—Ç–µ–Ω—Ç–∞**.  
–ü—Ä–æ–µ–∫—Ç –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π CRUD –¥–ª—è –≤—Å–µ—Ö –∏–≥—Ä–æ–≤—ã—Ö —Å—É—â–Ω–æ—Å—Ç–µ–π —Å –∂—ë—Å—Ç–∫–∏–º–∏ UX-–ø—Ä–∞–≤–∏–ª–∞–º–∏, –∏—Å–∫–ª—é—á–∞—é—â–∏–º–∏ —Ä—É—á–Ω–æ–π –≤–≤–æ–¥ UUID –∏ –Ω–µ–∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ.

---

## üìå –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

- **Expo + React Native + TypeScript**
- **Expo Router** ‚Äî —Ñ–∞–π–ª–æ–≤–∞—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è (`app/`)
- **@tanstack/react-query** ‚Äî —Å–µ—Ä–≤–µ—Ä–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏ –∫—ç—à
- **axios** ‚Äî –µ–¥–∏–Ω—ã–π API-–∫–ª–∏–µ–Ω—Ç (`apiClient`)
- **react-hook-form + zod** ‚Äî —Ñ–æ—Ä–º—ã –∏ —Å—Ç—Ä–æ–≥–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è
- **–¢—ë–º–Ω–∞—è —Ç–µ–º–∞** (`src/shared/theme`)
- **Feature-based –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**

---

## üß† –ö–ª—é—á–µ–≤—ã–µ UX-–ø—Ä–∏–Ω—Ü–∏–ø—ã –ø—Ä–æ–µ–∫—Ç–∞ (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–´)

### 1Ô∏è‚É£ –ù–∏–∫–∞–∫–∏—Ö UUID –≤ UI
- –í—Å–µ —Å–≤—è–∑–∏ (`material_id`, `weapon_kind_id`, `source_id` –∏ —Ç.–¥.)  
  **–≤—Å–µ–≥–¥–∞ –≤—ã–±–∏—Ä–∞—é—Ç—Å—è –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é**, –∞ UUID –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.
- UUID **–Ω–∏–∫–æ–≥–¥–∞** –Ω–µ –≤–≤–æ–¥–∏—Ç—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º –≤—Ä—É—á–Ω—É—é.

### 2Ô∏è‚É£ –ï–¥–∏–Ω—ã–π flow Create / Edit
- –ü–æ—Å–ª–µ **Create** –∏ **Edit** –≤—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:
```
router.replace(detailsRoute)
```
- ‚ùå `router.back()` –ø–æ—Å–ª–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∑–∞–ø—Ä–µ—â—ë–Ω.
- ‚ùå reset —Ñ–æ—Ä–º—ã –ø–æ—Å–ª–µ Create –∑–∞–ø—Ä–µ—â—ë–Ω ‚Äî –∞–¥–º–∏–Ω –¥–æ–ª–∂–µ–Ω –≤–∏–¥–µ—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç.

### 3Ô∏è‚É£ Back-guard (unsaved changes)
- –ù–∞ **–≤—Å–µ—Ö Create/Edit —Ñ–æ—Ä–º–∞—Ö**:
  - –µ—Å–ª–∏ –µ—Å—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è ‚Üí –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è Alert  
    *¬´–ï—Å—Ç—å –Ω–µ—Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è. –í—ã–π—Ç–∏ –±–µ–∑ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è?¬ª*
- –†–µ–∞–ª–∏–∑—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ `formState.isDirty`.

### 4Ô∏è‚É£ Nullable –ø–æ–ª—è —á–µ—Ä–µ–∑ Switch
- Switch —É–ø—Ä–∞–≤–ª—è–µ—Ç —Ç–µ–º, –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –ª–∏ `null` –∏–ª–∏ –æ–±—ä–µ–∫—Ç.
- –ï—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω–æ ‚Äî –∑–Ω–∞—á–µ–Ω–∏—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã –∏ –≤–∞–ª–∏–¥–∏—Ä—É—é—Ç—Å—è.
- ‚ùå –ù–µ–ª—å–∑—è —Å–æ—Ö—Ä–∞–Ω—è—Ç—å `count = 0`.
- ‚ùå –ù–µ–ª—å–∑—è –ø—Ä–µ–≤—Ä–∞—â–∞—Ç—å –ø—É—Å—Ç–æ–π –≤–≤–æ–¥ –≤ `0`.

### 5Ô∏è‚É£ –ú—è–≥–∫–∏–π –≤–≤–æ–¥ —á–∏—Å–µ–ª
–ó–∞–ø—Ä–µ—â—ë–Ω –ø–∞—Ç—Ç–µ—Ä–Ω:
```
Number(text) || 0
```
–ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:
- –ø—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞ ‚Üí –Ω–µ –º–µ–Ω—è—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ
- –Ω–µ–≤–∞–ª–∏–¥–Ω–æ–µ —á–∏—Å–ª–æ ‚Üí –Ω–µ –º–µ–Ω—è—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ
- –≤–∞–ª–∏–¥–Ω–æ–µ —á–∏—Å–ª–æ ‚Üí –æ–±–Ω–æ–≤–∏—Ç—å

### 6Ô∏è‚É£ –°–ª–æ–≤–∞—Ä–∏ –Ω–µ –±–ª–æ–∫–∏—Ä—É—é—Ç UI
- –ü—Ä–∏ –æ—à–∏–±–∫–µ —Å–ª–æ–≤–∞—Ä—è UI –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å.
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è fallback (key).
- –ï—Å—Ç—å –∫–Ω–æ–ø–∫–∞ ¬´–ü–æ–≤—Ç–æ—Ä–∏—Ç—å¬ª.

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ (–∞–∫—Ç—É–∞–ª—å–Ω–∞—è)

```
project-root/
  app/
    (tabs)/
      library/
        spells/
        feats/
        equipment/
          weapons/
          armors/
          tools/
          materials/
          material-components/
          weapon-kinds/
          weapon-properties/
        sources/
        dictionaries/
  src/
    shared/
    features/
```

---

## üß± Feature-based –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
features/<entity>/
  api/
  components/
```

–ü—Ä–∞–≤–∏–ª–∞:
- API-–ª–æ–≥–∏–∫–∞ ‚Äî —Ç–æ–ª—å–∫–æ –≤ `api/`
- UI ‚Äî —Ç–æ–ª—å–∫–æ –≤ `components/`
- –û–¥–∏–Ω `Form` –¥–ª—è Create/Edit
- –û–¥–∏–Ω `Details` –±–µ–∑ form-–ª–æ–≥–∏–∫–∏

---

### 7Ô∏è‚É£ Details ‚Äî –≤—Å–µ–≥–¥–∞ –æ—Ç–¥–µ–ª—å–Ω—ã–π —ç–∫—Ä–∞–Ω
- Details —ç–∫—Ä–∞–Ω:
  - ‚ùå –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç form-–ª–æ–≥–∏–∫–∏
  - ‚ùå –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç mutation
  - ‚úÖ —Ç–æ–ª—å–∫–æ GET + –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
- –í—Å–µ –∫–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π (Edit/Delete) –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ Details.
